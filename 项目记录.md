### 技术栈
1. Json序列化和反序列化
2. muduo网络库开发
3. Nginx源码编译安装和环境部署
4. Nginx的tcp负载均衡器配置
5. redis缓存服务器编程实践
6. 基于发布-订阅的服务器中间件redis消息队列编程实践
7. mysql数据库编程
8. Cmake构建编译环境
9. github托管项目

### 项目需求
1. 客户端新用户注册
2. 客户端用户登录
3. 添加好友和添加群组
4. 好友聊天
5. 群组聊天
6. 离线消息
7. nginx配置tcp负载均衡
8. 集群聊天系统支持客户端跨服务器通信

### 项目目标
1. 掌握服务器的网络I/O模块，业务模块，数据模块分层的设计思想
2. 掌握c++ muduo网络库的编程以及实现原理
3. 掌握Json的编程应用
4. 掌握Nginx配置部署tcp负载均衡器的应用以及原理
5. 掌握服务器中间件的应用场景和基于发布-订阅的redis编程实践以及应用原理
6. 掌握CMake构建自动化编译环境
7. 掌握Github管理项目

### 开发环境
1. ubuntu linux环境
2. 安装Json开发库
3. 安装boost+muduo网络库开发环境
4. 安装redis环境
5. 安装mysql数据库环境
6. 安装Nginx
7. 安装CMake环境


### 消息
1. {"msgid":1, "id":1, "password":"123456"}
2. {"msgid":1, "id":2, "password":"123456"}
3. telnet 127.0.0.1 6000
4. {"msgid":2, "name":"li si", "password":"123456"}
5. {"msgid":5, "to":1, "msg":"hello!"}
6. {"msgid":5, "to":2, "msg":"thank you"}


### 运行须知
1. 要打开win的mysql 修改db.cpp里面的配置（ip和port、mysql用户和密码）
2. 要打开redis-server
3. 要打开nginx 配置文件中配好port 服务器端绑定好相应端口 然后客户端连接8000就行啦 (/etc/nginx/nginx.conf)


### question
1. 用户A如何给用户B发信息
按照发送消息格式在命令行输入
解析命令 调用command函数
chat函数中 解析toid toMessage 封装并发送
服务器收到消息 解析消息 调用消息回调函数
消息回调函数中 拿到toid 查询toid是否登录在本服务器 是的话直接将消息转发
不是的话 查询数据库 toid用户是否上线 上线通过redis发布订阅功能将消息转发
没有上线 存储为离线消息
客户端接收线程收到响应后 解析响应类型
one_chat_msg 打印消息

2. 登录业务的全过程
客户端连接上服务器 启动个接收线程
进入主界面 选择登录 输入用户名和密码 封装登录消息
向服务端发送登录消息 等待
服务器端收到消息 解析消息类型 调用登录回调处理消息
登录业务中 判断用户名和密码
保存连接 redis订阅用户id
更新用户状态 查询离线消息 好友消息 群组消息 消息封装 
发送响应给客户端
客户端接收线程处理
解析响应类型 登录响应
设置当前客户端 用户 好友列表 群组列表
打印用户基本信息 朋友信息 群组信息
打印离线消息
设置登录成功
打印用户界面
等待用户输入命令


2. 群组聊天是怎么实现的
> 


